const {
  GoogleGenerativeAI,
  HarmCategory,
  HarmBlockThreshold,
} = require("@google/generative-ai");

const EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY =
  "AIzaSyCqVrgy2WtlV4sNiw2mJhLqN_GARMotVOM";
const genAI = new GoogleGenerativeAI(EXPO_PUBLIC_GOOGLE_GEMINI_API_KEY);

const model = genAI.getGenerativeModel({
  model: "gemini-1.5-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 64,
  maxOutputTokens: 8192,
  responseMimeType: "text/plain",
};

export const chatSession = model.startChat({
  generationConfig,
  history: [
    {
      role: "user",
      parts: [
        {
          text: 'Generate Travel Plan for Location : Greece , for 3 Days and 2 Night for Family with a\nModerate budget with a Flight Details, Flight Price with booking url, Hotels options list with HotelName, Hotel address, Price, Hotel image url , geo coordinates , rating, descriptions and places to visit nearby with placeName, Place Details, Place Image Url, Geo Coordinates, ticket Pricing,\nTime to travel each of the location for 3 days and 2 night with each day plan with best time to visit , Return output Validated JSON , JSON form needed example  {"trip":{"budget":"Moderate","destination":"France","hotels":[{"hotel_name":"Hôtel de France","address":"1 Rue de France, 75009 Paris, France","places_to_visit_nearby":[{"place_name":"Musée du Louvre","ticket_pricing":"€17","place_details":"One of the world\'s largest and most famous museums, housing masterpieces like the Mona Lisa.","place_image_url":"https://www.louvre.fr/sites/default/files/styles/large_hero/public/2020-07/Louvre-Cour-Carré-Nuit.jpg?itok=0B_e9y6f","time_to_travel":"1-2 hours","geo_coordinates":[48.8606,2.3376]},{"place_image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/Jardin_des_Tuileries_(2009).jpg/1280px-Jardin_des_Tuileries_(2009).jpg","place_name":"Tuileries Garden","ticket_pricing":"Free","place_details":"A beautiful park with formal gardens, sculptures, and views of the Louvre.","geo_coordinates":[48.8613,2.3286],"time_to_travel":"1-2 hours"}],"geo_coordinates":[48.8742,2.3493],"description":"A charming hotel in the heart of Paris, offering comfortable rooms and a friendly atmosphere.","price":"$150/night","rating":4.5,"hotel_image_url":"https://www.hoteldeFrance.com/images/hotel.jpg"},{"geo_coordinates":[48.8583,2.3579],"description":"A stylish and boutique hotel in the trendy Marais district, offering chic rooms and a rooftop terrace.","address":"1 Rue des Rosiers, 75004 Paris, France","hotel_image_url":"https://www.hotellepetitmoulin.com/images/hotel.jpg","hotel_name":"Hôtel Le Petit Moulin","rating":4.7,"places_to_visit_nearby":[{"geo_coordinates":[48.8586,2.3643],"place_image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/f/fb/Place_des_Vosges_001.jpg/1280px-Place_des_Vosges_001.jpg","place_details":"A charming square in the Marais district, surrounded by elegant houses and a central fountain.","time_to_travel":"1-2 hours","ticket_pricing":"Free","place_name":"Place des Vosges"},{"geo_coordinates":[48.8598,2.3629],"place_details":"A museum dedicated to the work of Pablo Picasso, showcasing his paintings, sculptures, and drawings.","place_image_url":"https://upload.wikimedia.org/wikipedia/commons/thumb/0/01/Musee_Picasso_Paris_Façade_et_cour.jpg/1280px-Musee_Picasso_Paris_Façade_et_cour.jpg","ticket_pricing":"€13","time_to_travel":"1-2 hours","place_name":"Musée Picasso"}],"price":"$200/night"}],"travelers":"Couple","duration":"4 days 3 nights","flight":{"details":{"arrival_airport":"Paris Charles de Gaulle (CDG)","airline":"Air France","departure_airport":"New York JFK","flight_class":"Economy","return_date":"2024-03-19","departure_date":"2024-03-15"},"price":"$700","booking_url":"https://www.airfrance.com/"},"daily_plan":[{"best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","location":"Paris","day":"Day 1","activity":"Arrive at Paris Charles de Gaulle (CDG) airport, take the RER B train to Gare du Nord, check into your hotel in the Marais district.","time":"Morning"},{"time":"Afternoon","day":"Day 1","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","location":"Marais district, Paris","activity":"Explore the Marais district, visit the Place des Vosges and the Musée Picasso."},{"activity":"Dinner at a traditional French restaurant in the Marais district.","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","time":"Evening","location":"Marais district, Paris","day":"Day 1"},{"location":"Paris","time":"Morning","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","day":"Day 2","activity":"Visit the Musée du Louvre, admire the Mona Lisa and other masterpieces."},{"time":"Afternoon","activity":"Walk along \nthe Seine River, visit Notre Dame Cathedral (currently under renovation).","day":"Day 2","location":"Paris","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather."},{"best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","activity":"Enjoy a romantic dinner cruise along the Seine River.","day":"Day 2","time":"Evening","location":"Paris"},{"activity":"Take a day trip to Versailles Palace, explore the opulent palace and gardens.","location":"Versailles","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","time":"Morning","day":"Day 3"},{"time":"Afternoon","location":"Paris","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","activity":"Return to Paris, relax in the Tuileries Garden.","day":"Day 3"},{"day":"Day 3","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","location":"Latin Quarter, Paris","activity":"Dinner at a restaurant in the Latin Quarter, explore the vibrant atmosphere.","time":"Evening"},{"activity":"Visit the Eiffel Tower, enjoy panoramic views of Paris.","location":"Paris","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","day":"Day 4","time":"Morning"},{"time":"Afternoon","location":"Champs-Élysées, Paris","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","day":"Day 4","activity":"Shopping in the Champs-Élysées, enjoy the upscale boutiques."},{"time":"Evening","best_time_to_visit":"Year-round, but spring and autumn are ideal for pleasant weather.","activity":"Departure from Paris Charles de Gaulle (CDG) airport.","day":"Day 4","location":"Paris"}]}',
        },
      ],
    },
    {
      role: "model",
      parts: [
        {
          text: '```json\n{\n  "trip": {\n    "budget": "Moderate",\n    "destination": "Greece",\n    "travelers": "Family",\n    "duration": "3 days 2 nights",\n    "flight": {\n      "details": {\n        "departure_airport": "Your Departure Airport",\n        "arrival_airport": "Athens International Airport (ATH)",\n        "airline": "Aegean Airlines",\n        "flight_class": "Economy",\n        "departure_date": "2024-03-15",\n        "return_date": "2024-03-17"\n      },\n      "price": "300",\n      "booking_url": "https://www.aegeanair.com/"\n    },\n    "hotels": [\n      {\n        "hotel_name": "AthensWas Hotel",\n        "address": "Aiolou 40, Athens 105 52, Greece",\n        "price": "80",\n        "hotel_image_url": "https://www.booking.com/hotel/gr/athenswas.html",\n        "geo_coordinates": [37.9794, 23.7272],\n        "rating": 4.5,\n        "description": "A modern and stylish hotel located in the heart of Athens, within walking distance of major attractions.",\n        "places_to_visit_nearby": [\n          {\n            "place_name": "Acropolis",\n            "place_details": "A historic citadel overlooking Athens, housing ancient temples and monuments.",\n            "place_image_url": "https://www.athensattica.gr/sites/default/files/styles/panorama_gallery_full/public/image/Panorama-Acropolis-Athens.jpg?itok=4Z39640t",\n            "geo_coordinates": [37.9715, 23.7260],\n            "ticket_pricing": "20",\n            "time_to_travel": "2-3 hours"\n          },\n          {\n            "place_name": "Parthenon",\n            "place_details": "A magnificent temple dedicated to the goddess Athena, a symbol of Athens.",\n            "place_image_url": "https://www.athensattica.gr/sites/default/files/styles/panorama_gallery_full/public/image/Panorama-Acropolis-Athens.jpg?itok=4Z39640t",\n            "geo_coordinates": [37.9715, 23.7260],\n            "ticket_pricing": "20",\n            "time_to_travel": "1-2 hours"\n          },\n          {\n            "place_name": "Plaka",\n            "place_details": "A charming historic district with narrow cobblestone streets, traditional shops, and restaurants.",\n            "place_image_url": "https://www.greece-is.com/images/plaka-athens-greece.jpg",\n            "geo_coordinates": [37.9747, 23.7269],\n            "ticket_pricing": "Free",\n            "time_to_travel": "1-2 hours"\n          }\n        ]\n      }\n    ],\n    "daily_plan": [\n      {\n        "day": "Day 1",\n        "location": "Athens",\n        "best_time_to_visit": "Spring (April-May) or Autumn (September-October) for pleasant weather.",\n        "activity": "Arrive at Athens International Airport (ATH), take a taxi or metro to your hotel in Athens. Check in and settle in.",\n        "time": "Morning"\n      },\n      {\n        "day": "Day 1",\n        "location": "Athens",\n        "best_time_to_visit": "Morning or afternoon for optimal lighting.",\n        "activity": "Visit the Acropolis, explore the ancient ruins and enjoy panoramic views of the city.",\n        "time": "Afternoon"\n      },\n      {\n        "day": "Day 1",\n        "location": "Plaka",\n        "best_time_to_visit": "Evening for a vibrant atmosphere.",\n        "activity": "Explore the Plaka district, enjoy dinner at a traditional Greek restaurant, and experience the nightlife.",\n        "time": "Evening"\n      },\n      {\n        "day": "Day 2",\n        "location": "Athens",\n        "best_time_to_visit": "Morning for a peaceful visit.",\n        "activity": "Visit the Acropolis Museum, learn about the history of the Acropolis and see artifacts from the site.",\n        "time": "Morning"\n      },\n      {\n        "day": "Day 2",\n        "location": "Monastiraki",\n        "best_time_to_visit": "Afternoon for a lively atmosphere.",\n        "activity": "Explore the Monastiraki district, shop for souvenirs at the flea market, and visit the ancient Agora.",\n        "time": "Afternoon"\n      },\n      {\n        "day": "Day 2",\n        "location": "Athens",\n        "best_time_to_visit": "Evening for a scenic experience.",\n        "activity": "Take a walk along the waterfront, enjoy dinner at a seafood restaurant, and watch the sunset over the Aegean Sea.",\n        "time": "Evening"\n      },\n      {\n        "day": "Day 3",\n        "location": "Santorini",\n        "best_time_to_visit": "Year-round, but best in spring (April-May) or autumn (September-October) for pleasant weather and fewer crowds.",\n        "activity": "Take a ferry or flight to Santorini, a beautiful island known for its stunning sunsets and white-washed villages.",\n        "time": "Morning"\n      },\n      {\n        "day": "Day 3",\n        "location": "Santorini",\n        "best_time_to_visit": "Afternoon for a relaxing experience.",\n        "activity": "Explore the village of Oia, visit the Santorini caldera, and enjoy the breathtaking views.",\n        "time": "Afternoon"\n      },\n      {\n        "day": "Day 3",\n        "location": "Santorini",\n        "best_time_to_visit": "Evening for a magical experience.",\n        "activity": "Enjoy dinner at a restaurant with a view of the sunset, and watch the sky transform into vibrant colors.",\n        "time": "Evening"\n      }\n    ]\n  }\n}\n```\n\n**Flight Details:**\n\n* **Departure Airport:**  You can replace "Your Departure Airport" with your actual departure airport.\n* **Arrival Airport:** Athens International Airport (ATH)\n* **Airline:** Aegean Airlines is a good option for domestic flights within Greece, but you can choose other airlines based on your preferences and budget.\n* **Flight Class:** Economy\n* **Departure Date:** 2024-03-15\n* **Return Date:** 2024-03-17\n\n**Hotel:**\n\n* **Hotel Name:** AthensWas Hotel\n* **Address:** Aiolou 40, Athens 105 52, Greece\n* **Price:**  €80 per night\n* **Hotel Image URL:**  https://www.booking.com/hotel/gr/athenswas.html\n* **Geo Coordinates:** [37.9794, 23.7272]\n* **Rating:** 4.5 stars\n* **Description:** A modern and stylish hotel located in the heart of Athens, within walking distance of major attractions.\n* **Places to Visit Nearby:** Acropolis, Parthenon, Plaka\n\n**Places to Visit:**\n\n* **Acropolis:** A historic citadel overlooking Athens, housing ancient temples and monuments.\n* **Parthenon:** A magnificent temple dedicated to the goddess Athena, a symbol of Athens.\n* **Plaka:** A charming historic district with narrow cobblestone streets, traditional shops, and restaurants.\n* **Monastiraki:** A vibrant district with a flea market, ancient Agora, and shops.\n* **Santorini:** A beautiful island known for its stunning sunsets and white-washed villages.\n* **Oia:** A village on Santorini with breathtaking views of the caldera.\n\n**Daily Plan:**\n\n* **Day 1:** Arrive in Athens, check into the AthensWas Hotel, visit the Acropolis, explore Plaka.\n* **Day 2:** Visit the Acropolis Museum, explore Monastiraki, take a walk along the waterfront.\n* **Day 3:** Take a ferry or flight to Santorini, explore Oia, enjoy dinner with a view of the sunset.\n\n**Note:** This is just a sample plan, and you can adjust it to fit your family\'s interests and preferences.  Be sure to check the most current ticket pricing and travel information before your trip. \n',
        },
      ],
    },
  ],
});
